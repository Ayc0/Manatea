<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>React-Manatea</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
  <style>
    #wrapper>* {
      width: 40%
    }

    #root {
      position: fixed;
      top: 5em;
      left: 50%;
    }
  </style>
</head>

<body>
  <div id="wrapper">
    <pre><code id="code" class="javascript"></code></pre>
    <div id="root"></div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script>
  <script src="https://unpkg.com/react@16.4.1/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@16.4.1/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/manatea@0.3.0/dist/manatea.umd.js"></script>
  <script src="https://unpkg.com/react-manatea@0.3.1/dist/react-manatea.umd.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script type="text/babel" id="source">
const { createCup } = manatea;
const { Manatee, infuse } = ReactManatea;

const add = tea => Math.min(50, tea + 1);
const subtract = tea => Math.max(0, tea - 1);

// Use lib
const UnnamedCup = (() => {
// Define store
const counter = createCup(0);

const increment = () => counter(add);
const decrement = () => counter(subtract);

return () => (
  <div>
    Unnamed counter <br />
    <button onClick={increment}>+</button>
    <button onClick={decrement}>-</button> <br />
    <Manatee cup={counter}>{tea => tea}</Manatee> <br />
  </div>
);
})();

const NamedCup = (() => {
// Define store
const counter = createCup(0, "counter");

const increment = () => counter(add);
const decrement = () => counter(subtract);

return () => (
  <div>
    Named counter <br />
    <button onClick={increment}>+</button>
    <button onClick={decrement}>-</button> <br />
    <Manatee cup="counter">{tea => tea}</Manatee> <br />
  </div>
);
})();

const ConnectedUnnamedCup = (() => {
// Define store
const counter = createCup(0);

const increment = () => counter(add);
const decrement = () => counter(subtract);

const component = ({ tea }) => (
  <div>
    Unnamed connected counter <br />
    <button onClick={increment}>+</button>
    <button onClick={decrement}>-</button> <br />
    {tea} <br />
  </div>
);
return infuse(counter)(component);
})();

const ConnectedNamedCup = (() => {
// Define store
const counter = createCup(0, "connect");

const increment = () => counter(add);
const decrement = () => counter(subtract);

const component = ({ tea }) => (
  <div>
    Named connected counter <br />
    <button onClick={increment}>+</button>
    <button onClick={decrement}>-</button> <br />
    {tea} <br />
  </div>
);
return infuse("connect")(component);
})();

const App = () => (
  <React.Fragment>
    <UnnamedCup /> <br />
    <NamedCup /> <br />
    <ConnectedUnnamedCup /> <br />
    <ConnectedNamedCup /> <br />
  </React.Fragment>
);

ReactDOM.render(<App />, document.getElementById("root"));
  </script>

  <script>
    hljs.initHighlightingOnLoad();
    const source = document.getElementById('source');
    const code = document.getElementById('code');

    code.textContent = source.textContent;
  </script>

</body>

</html>